# OB English Learner - 首次使用必读 🚀

欢迎使用 OB English Learner 插件！

---

## ⚡ 快速开始

### 第一步：安装 yt-dlp（重要！）

本插件需要 **yt-dlp** 工具来获取YouTube字幕。

**首次打开插件时会自动弹出安装引导**，请按照提示操作：

#### Windows 用户
```bash
winget install yt-dlp
```

#### Mac 用户
```bash
brew install yt-dlp
```

#### Linux / 通用方式
```bash
pip install yt-dlp
```

**验证安装**:
```bash
yt-dlp --version
```

---

### 第二步：配置 API Keys

插件的AI功能需要API Key，请在设置中配置：

#### 1. AI 翻译（推荐 DeepSeek）
- 打开设置 → **AI 智能** Tab
- 配置 **AI API Key**
- 选择提供商（DeepSeek性价比最高）

#### 2. 语音转文字（可选）
- 打开设置 → **Audio 音频** Tab
- 配置 **STT API Key**（可使用AI Key）
- 默认使用 OpenAI Whisper

#### 3. 文本转语音（可选）
- 打开设置 → **Audio 音频** Tab  
- 配置 **TTS API Key**（可使用AI Key）
- 默认使用 OpenAI TTS

---

### 第三步：导入第一个视频

1. 点击左侧 Ribbon 栏的 **视频图标** 📺
2. 粘贴YouTube或B站视频链接
3. 等待插件自动：
   - 获取字幕
   - AI翻译（如已配置）
   - 生成双语笔记
   - 创建SRT字幕文件

---

## 🎯 核心功能一览

### 1. YouTube/B站学习笔记
- ✅ 自动获取字幕
- ✅ AI翻译成中文
- ✅ 智能分段排版
- ✅ 生成SRT字幕文件
- ✅ 自动集成到Bases数据库

### 2. 语音转文字
- ✅ 点击麦克风图标开始录音
- ✅ 自动转录为文字
- ✅ 插入当前笔记
- ✅ 支持多种格式（WAV/WebM/MP3）

### 3. 文本转语音（朗读）
- ✅ 选中文本 → 右键 → "Aloud: Play selection"
- ✅ 支持多种语音（OpenAI/Azure/ElevenLabs）
- ✅ 逐句播放，可前进后退
- ✅ 本地缓存，节省成本

### 4. 自定义AI命令
- ✅ 创建自己的AI命令
- ✅ 支持模板变量
- ✅ 命令面板快速调用

---

## 💡 常见问题

### Q1: yt-dlp安装后还是提示未安装？
**A**: 请重启Obsidian（Ctrl+R / Cmd+R）

### Q2: 如何重新打开yt-dlp安装引导？
**A**: 设置 → Content & Config → Video & Assets → 点击 "Setup Guide"

### Q3: 如何关闭首次使用引导？
**A**: 在引导窗口中点击 "⏭️ 跳过，不再提示"

### Q4: YouTube字幕获取失败？
**A**: 
1. 确认yt-dlp已安装（运行 `yt-dlp --version`）
2. 确认网络连接正常
3. 尝试其他视频（某些视频无字幕）

### Q5: AI翻译失败？
**A**:
1. 检查API Key是否正确
2. 检查API余额是否充足
3. 查看设置中的错误提示

### Q6: TTS无声音？
**A**:
1. 检查TTS API Key
2. 确认已选中文本
3. 查看浏览器音量设置

---

## 🎨 界面说明

### Tab 导航
```
📝 Content & Config  - 内容和配置
🤖 AI               - AI 翻译设置
🎙️ Audio            - 语音和TTS
⚡ Commands         - 自定义命令
⚙️ Advanced         - 高级设置
```

### Ribbon 图标
- 📺 **视频图标** - 导入YouTube/B站视频
- 🎙️ **麦克风图标** - 开始语音录音

### 右键菜单（选中文本后）
- **Aloud: Play selection** - 朗读所选文本
- **Aloud: Paste text to audio** - 剪贴板转音频
- **Aloud: Export selection to audio** - 导出为音频文件

---

## 📂 默认文件夹

插件会自动创建以下文件夹：

```
01-Videos/              # 视频笔记
02-Subtitles/           # SRT字幕文件
03-Recordings/          # 录音文件
03-Resources/
  └── aloud/            # TTS导出音频
  └── thumbnails/       # 视频封面图
```

可在设置中修改这些路径。

---

## 🔧 推荐配置

### 最小配置（免费）
- ✅ 安装 yt-dlp
- ❌ 不配置 API Key
- **功能**: 获取YouTube字幕（无翻译）

### 基础配置（低成本）
- ✅ 安装 yt-dlp
- ✅ DeepSeek API Key（翻译）
- **功能**: YouTube字幕 + AI翻译
- **成本**: ~¥1/万字

### 完整配置（全功能）
- ✅ 安装 yt-dlp
- ✅ DeepSeek API Key（翻译）
- ✅ OpenAI API Key（语音+TTS）
- **功能**: 全部功能
- **成本**: 按使用量

---

## 📖 更多帮助

### 文档
- `插件检查报告.md` - 功能完整性检查
- `yt-dlp字幕获取逻辑检查报告.md` - 技术细节
- `插件深度检查报告.md` - 完整检查报告

### 在线资源
- yt-dlp官网: https://github.com/yt-dlp/yt-dlp
- DeepSeek: https://platform.deepseek.com
- OpenAI: https://platform.openai.com

### 获取支持
- 查看设置中的状态指示器（绿色=正常，橙色=警告，红色=未配置）
- 查看Obsidian开发者控制台（Ctrl+Shift+I / Cmd+Opt+I）
- 检查浏览器控制台的日志（按F12）

---

## ✨ 小贴士

1. **首次使用**: 建议先用短视频测试（< 5分钟）
2. **API成本**: 使用TTS缓存可大幅节省费用
3. **快捷键**: 
   - `Ctrl+Shift+R` - 开始录音
   - `Ctrl+Space` - TTS 播放/暂停（需选中文本）
4. **批量导入**: 可连续导入多个视频，插件会依次处理
5. **主题适配**: 插件UI自动适配你的Obsidian主题

---

**祝你使用愉快！** 🎉

*如有问题，请查看详细文档或联系开发者*
